@page "/"
@inject IDialogService DialogService
@inject NavigationManager _navigationManager;
@inject PageHistoryService _pageHistory;
@if (_pageHistory.CanGoBack())
{
    <MudIconButton Edge="Edge.Start" Icon="@Icons.Material.Filled.ArrowBackIos" href="@_pageHistory.GetGoBackPage()">Go Back</MudIconButton>

}

<MudGrid Class="align-center mt-5" @ref=this.grid>
    @if (Workouts != null)
    {
        @foreach (var workout in Workouts)
        {
                <WorkoutItemComponent Workout="workout" />   
        }
    }
    else
    {
        <p>Loading...</p>
    }
    <MudItem md="6" sm="12" xs="12" Class="d-flex justify-center">
        <MudFab OnClick="@OpenDialog" Color="Color.Primary" StartIcon="@Icons.Material.Filled.Add" />
    </MudItem>
</MudGrid>

@code {
    private MudTheme Theme { get; set; }

    [Inject]
    LocalStorageService LocalStorageService { get; set; }
    public List<Workout> Workouts { get; set; }
    private MudGrid grid;

    protected override async Task OnInitializedAsync()
    {
        _pageHistory.AddPageToHistory("/");
        Workouts = await LocalStorageService.GetItemAsync<List<Workout>>("workouts");
    }

    private async Task OpenDialog()
    {
        var result = await DialogService.ShowAsync<CreateWorkoutDialogComponent>();
    }

    
}